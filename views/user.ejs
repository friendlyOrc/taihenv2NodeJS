<div class="row">
    <ol class="breadcrumb">
        <li><a href="#"><svg class="glyph stroked home"><use xlink:href="#stroked-home"></use></svg></a></li>
        <li class="active">Trang chủ quản trị </li>
        <li class=""> > User</li>
    </ol>
</div>

<div class="row page-header">
    <div class="col-sm-12">
        <h1>User</h1> 
        <a href="/admin/add_user"><button class="btn btn-success btn-md">Thêm account</button></a>
    </div>
</div><!--/.row-->

<div class="row user">
    <table class="table table-striped table-bordered user__table">
        <thead class="thead-dark">
          <tr>
            <th scope="col">ID</th>
            <th scope="col">Account</th>
            <th scope="col">Pass</th>
            <th scope="col">Xem</th>
            <th scope="col">Edit</th>
            <th scope="col">Xóa account</th>
          </tr>
        </thead>
        <tbody>
            <%for(let i = 0; i < sess.account.length; i++){%>
                <tr>
                    <th scope="row"><%= sess.account[i].accID%></th>
                    <td><%= sess.account[i].email%></td>
                    <td id="password<%= i%>"></td>
                    <td><button class="btn btn-success btn-sm" onclick="reveal('<%= sess.account[i].password%>', <%= i%>) "><i class="fas fa-eye"></i></button></td>
                    <td><button class="btn btn-success btn-sm" onclick="window.location.replace('/admin/edit_user/<%= sess.account[i].accID%>')"><i class="fas fa-pen"></i></button></td>
                    <td><button class="btn btn-danger btn-sm" onclick="confirmDelete('<%= sess.account[i].accID%>')"><i class="fas fa-times"></i></button></td>
                </tr>
            <%}%>
            
        </tbody>
      </table>
      
      
</div><!--/.row-->
<script>
    function reveal(str, i){
        const pass = document.querySelector('#password' + i);
        pass.innerHTML = str;
        setTimeout(() => {
            pass.innerHTML = '';
        }, 5000);
    }
    function confirmDelete(i){
        const rs = confirm('Bạn có muốn xóa user này?');
        if(rs){
            window.location.replace("/admin/delete_user?id=" + i);
        }else{
            return;
        }
    }
</script>